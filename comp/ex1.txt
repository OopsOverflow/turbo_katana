-- ----- VTABLES -----
ALLOC 9
DUPN 1
PUSHA Point_4_egal
STORE 0
DUPN 1
PUSHA Point_9_allClones
STORE 1
DUPN 1
PUSHA Point_5_clone
STORE 2
DUPN 1
PUSHA Point_5_print
STORE 3
DUPN 1
PUSHA Point_4_move
STORE 4
DUPN 1
PUSHA Point_8_isCloned
STORE 5
DUPN 1
PUSHA Point_7_setName
STORE 6
DUPN 1
PUSHA Point_4_gety
STORE 7
DUPN 1
PUSHA Point_4_getx
STORE 8
ALLOC 2
DUPN 1
PUSHA Couleur_7_estGris
STORE 0
DUPN 1
PUSHA Couleur_4_name
STORE 1
ALLOC 0
ALLOC 12
DUPN 1
PUSHA Point_4_egal
STORE 0
DUPN 1
PUSHA Point_9_allClones
STORE 1
DUPN 1
PUSHA PointColore_5_clone
STORE 2
DUPN 1
PUSHA PointColore_5_print
STORE 3
DUPN 1
PUSHA Point_4_move
STORE 4
DUPN 1
PUSHA Point_8_isCloned
STORE 5
DUPN 1
PUSHA Point_7_setName
STORE 6
DUPN 1
PUSHA Point_4_gety
STORE 7
DUPN 1
PUSHA Point_4_getx
STORE 8
DUPN 1
PUSHA PointColore_7_estGris
STORE 9
DUPN 1
PUSHA PointColore_6_colore
STORE 10
DUPN 1
PUSHA PointColore_7_couleur
STORE 11
ALLOC 12
DUPN 1
PUSHA Point_4_egal
STORE 0
DUPN 1
PUSHA Point_9_allClones
STORE 1
DUPN 1
PUSHA PointColore_5_clone
STORE 2
DUPN 1
PUSHA PointColore_5_print
STORE 3
DUPN 1
PUSHA Point_4_move
STORE 4
DUPN 1
PUSHA Point_8_isCloned
STORE 5
DUPN 1
PUSHA Point_7_setName
STORE 6
DUPN 1
PUSHA Point_4_gety
STORE 7
DUPN 1
PUSHA Point_4_getx
STORE 8
DUPN 1
PUSHA PointNoir_7_estGris
STORE 9
DUPN 1
PUSHA PointNoir_6_colore
STORE 10
DUPN 1
PUSHA PointNoir_7_couleur
STORE 11
ALLOC 12
DUPN 1
PUSHA Point_4_egal
STORE 0
DUPN 1
PUSHA Point_9_allClones
STORE 1
DUPN 1
PUSHA PointColore_5_clone
STORE 2
DUPN 1
PUSHA PointColore_5_print
STORE 3
DUPN 1
PUSHA Point_4_move
STORE 4
DUPN 1
PUSHA Point_8_isCloned
STORE 5
DUPN 1
PUSHA Point_7_setName
STORE 6
DUPN 1
PUSHA Point_4_gety
STORE 7
DUPN 1
PUSHA Point_4_getx
STORE 8
DUPN 1
PUSHA DefaultPoint_7_estGris
STORE 9
DUPN 1
PUSHA PointColore_6_colore
STORE 10
DUPN 1
PUSHA DefaultPoint_7_couleur
STORE 11
ALLOC 0
-- ----- STATIC ATTRIBS -----
PUSHN 4
-- ----- MAIN INSTRUCTION -----
START
PUSHN 11
PUSHS "Debut du programme"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHA Point_4_init
CALL
POPN 0
POPN 1
PUSHI 0
PUSHA CouleurFactory_4_init
CALL
POPN 0
POPN 1
PUSHI 1
STOREL 5
PUSHI 0
STOREL 6
ALLOC 7
DUPN 1
PUSHG 0
STORE 0
PUSHI 1
PUSHI 5
PUSHS "p1"
PUSHA _CTOR_Point_
CALL
POPN 3
STOREL 0
ALLOC 7
DUPN 1
PUSHG 0
STORE 0
PUSHI 2
PUSHI 3
PUSHS "p2"
PUSHA _CTOR_Point_
CALL
POPN 3
STOREL 1
ALLOC 7
DUPN 1
PUSHG 0
STORE 0
PUSHI 0
PUSHI 0
PUSHS "p3"
PUSHA _CTOR_Point_
CALL
POPN 3
STOREL 2
PUSHI 12
STOREL 7
ALLOC 8
DUPN 1
PUSHG 3
STORE 0
PUSHI 0
PUSHI 0
PUSHI 0
PUSHA CouleurFactory_5_blanc
CALL
POPN 0
PUSHA _CTOR_PointColore_
CALL
POPN 3
STOREL 8
ALLOC 8
DUPN 1
PUSHG 4
STORE 0
PUSHI 1
PUSHI 0
PUSHI 1
SUB
PUSHA _CTOR_PointNoir_
CALL
POPN 2
STOREL 9
ALLOC 8
DUPN 1
PUSHG 5
STORE 0
PUSHA _CTOR_DefaultPoint_
CALL
POPN 0
STOREL 10
PUSHI 0
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHI 0
PUSHL 1
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 8
CALL
POPN 1
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 7
CALL
POPN 1
PUSHI 0
PUSHL 1
DUPN 1
LOAD 0
LOAD 4
CALL
POPN 4
POPN 1
PUSHI 0
PUSHI 0
PUSHL 1
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHI 0
PUSHL 8
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHS "origine"
PUSHL 8
DUPN 1
LOAD 0
LOAD 6
CALL
POPN 2
POPN 1
PUSHI 0
PUSHL 5
PUSHL 8
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 8
CALL
POPN 1
PUSHI 2
PUSHI 5
MUL
SUB
PUSHI 3
SUB
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 7
CALL
POPN 1
PUSHI 0
PUSHL 1
DUPN 1
LOAD 0
LOAD 4
CALL
POPN 4
POPN 1
PUSHI 0
PUSHL 5
PUSHL 1
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHS "On va essayer le clonage:"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 2
CALL
POPN 1
STOREL 3
PUSHI 0
PUSHL 6
PUSHL 3
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHS "p1 isCloned: "
DUPN 1
WRITES
POPN 1
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 5
CALL
POPN 1
JZ lbl1
PUSHS "OK"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
JUMP lbl2
lbl1: NOP
PUSHS "KO"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
lbl2: NOP
PUSHI 0
PUSHL 3
DUPN 1
LOAD 0
LOAD 2
CALL
POPN 1
STOREL 4
PUSHI 0
PUSHL 6
PUSHI 0
PUSHI 54
PUSHI 36
PUSHI 0
PUSHL 4
DUPN 1
LOAD 0
LOAD 4
CALL
POPN 4
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHS "Impression de tous les clones de p1:"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 1
CALL
POPN 1
POPN 1
PUSHS "Fin de l'impression de tous les clones"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHS "Valeur du compteur de nombre de points: "
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHA Point_7_howMany
CALL
POPN 0
STR
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHI 2
PUSHI 0
PUSHI 3
SUB
PUSHI 0
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 2
CALL
POPN 1
DUPN 1
LOAD 0
LOAD 4
CALL
POPN 4
STOREL 0
PUSHI 0
PUSHL 5
PUSHL 0
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHL 5
PUSHI 0
PUSHL 8
DUPN 1
LOAD 0
LOAD 2
CALL
POPN 1
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHS "test(Point, PointColore, PointNoir)"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHL 0
PUSHL 8
PUSHL 9
PUSHA Test_4_test
CALL
POPN 3
POPN 1
PUSHS "test(PointNoir, PointNoir, PointNoir)"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHL 9
PUSHL 9
PUSHL 9
PUSHA Test_4_test
CALL
POPN 3
POPN 1
PUSHL 9
STOREL 0
PUSHI 0
PUSHL 8
PUSHA Test_5_test2
CALL
POPN 1
POPN 1
PUSHI 0
PUSHL 9
PUSHA Test_5_test2
CALL
POPN 1
POPN 1
PUSHL 9
STOREL 8
PUSHS "test(PointNoir, PointNoir, PointNoir)"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHL 0
PUSHL 8
PUSHL 9
PUSHA Test_4_test
CALL
POPN 3
POPN 1
PUSHI 0
PUSHL 8
PUSHA Test_5_test2
CALL
POPN 1
POPN 1
PUSHI 0
PUSHL 9
PUSHA Test_5_test2
CALL
POPN 1
POPN 1
PUSHS "\nDone"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
POPN 11
STOP
-- ----- FUNCTIONS -----
_CTOR_Point_: NOP
PUSHN 0
PUSHL -4
PUSHL -3
STORE 4
PUSHL -4
PUSHL -2
STORE 5
PUSHL -4
PUSHL -1
STORE 6
PUSHL -4
PUSHI 0
PUSHA Point_4_incr
CALL
POPN 0
STORE 2
PUSHL -4
PUSHI 0
STORE 3
POPN 0
RETURN
Point_4_egal: NOP
PUSHN 2
PUSHL -2
LOAD 4
PUSHL -1
LOAD 4
SUB
STOREL 0
PUSHL -2
LOAD 5
PUSHL -1
LOAD 5
SUB
STOREL 1
PUSHI 0
STOREL -3
PUSHL 0
JZ lbl3
PUSHN 0
POPN 0
JUMP lbl4
lbl3: NOP
PUSHN 0
PUSHL 1
PUSHI 0
EQUAL
STOREL -3
POPN 0
lbl4: NOP
POPN 2
RETURN
Point_9_allClones: NOP
PUSHN 0
PUSHL -1
LOAD 3
PUSHI 0
EQUAL
NOT
JZ lbl5
PUSHN 0
PUSHI 0
PUSHI 1
PUSHL -1
LOAD 1
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHL -1
LOAD 1
DUPN 1
LOAD 0
LOAD 1
CALL
POPN 1
POPN 1
POPN 0
JUMP lbl6
lbl5: NOP
PUSHN 0
POPN 0
lbl6: NOP
POPN 0
RETURN
Point_5_clone: NOP
PUSHN 0
PUSHL -1
LOAD 3
PUSHI 1
EQUAL
POPN 1
PUSHL -1
ALLOC 7
DUPN 1
PUSHG 0
STORE 0
PUSHL -1
LOAD 4
PUSHL -1
LOAD 5
PUSHL -1
LOAD 6
PUSHS "'"
CONCAT
PUSHA _CTOR_Point_
CALL
POPN 3
STORE 1
PUSHL -1
LOAD 1
STOREL -2
POPN 0
RETURN
Point_5_print: NOP
PUSHN 0
PUSHL -2
JZ lbl7
PUSHS "Inside Point::print"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
JUMP lbl8
lbl7: NOP
PUSHN 0
POPN 0
lbl8: NOP
PUSHL -1
LOAD 6
DUPN 1
WRITES
POPN 1
PUSHS "= ("
PUSHL -1
LOAD 4
STR
CONCAT
PUSHS ", "
CONCAT
PUSHL -1
LOAD 5
STR
CONCAT
PUSHS ")"
CONCAT
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
POPN 0
RETURN
Point_4_move: NOP
PUSHN 0
PUSHL -1
PUSHL -1
LOAD 4
PUSHL -4
ADD
STORE 4
PUSHL -1
PUSHL -1
LOAD 5
PUSHL -3
ADD
STORE 5
PUSHL -2
JZ lbl9
PUSHN 0
PUSHI 0
PUSHL -2
PUSHL -1
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
POPN 0
JUMP lbl10
lbl9: NOP
PUSHN 0
POPN 0
lbl10: NOP
PUSHL -1
STOREL -5
POPN 0
RETURN
Point_8_isCloned: NOP
PUSHL -1
LOAD 3
PUSHI 0
EQUAL
NOT
STOREL -2
RETURN
Point_7_setName: NOP
PUSHN 0
PUSHL -1
PUSHL -2
STORE 6
POPN 0
RETURN
Point_4_gety: NOP
PUSHL -1
LOAD 5
STOREL -2
RETURN
Point_4_getx: NOP
PUSHL -1
LOAD 4
STOREL -2
RETURN
Point_4_init: NOP
PUSHN 0
PUSHI 0
STOREG 7
POPN 0
RETURN
Point_7_howMany: NOP
PUSHG 7
STOREL -1
RETURN
Point_4_incr: NOP
PUSHN 0
PUSHG 7
PUSHI 1
ADD
STOREG 7
PUSHG 7
STOREL -1
POPN 0
RETURN
_CTOR_Couleur_: NOP
PUSHN 0
PUSHL -2
PUSHL -1
STORE 1
PUSHL -2
LOAD 1
PUSHI 0
INF
JZ lbl11
PUSHL -2
PUSHI 0
STORE 1
JUMP lbl12
lbl11: NOP
PUSHL -2
LOAD 1
PUSHI 2
SUP
JZ lbl13
PUSHL -2
PUSHI 0
STORE 1
JUMP lbl14
lbl13: NOP
PUSHN 0
POPN 0
lbl14: NOP
lbl12: NOP
POPN 0
RETURN
Couleur_7_estGris: NOP
PUSHN 0
PUSHS "Inside Couleur::estGris"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHL -1
LOAD 1
PUSHI 2
EQUAL
STOREL -2
POPN 0
RETURN
Couleur_4_name: NOP
PUSHN 1
PUSHL -2
JZ lbl15
PUSHS "Inside Couleur::couleur"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
JUMP lbl16
lbl15: NOP
PUSHN 0
POPN 0
lbl16: NOP
PUSHL -1
LOAD 1
PUSHI 0
EQUAL
JZ lbl17
PUSHS "Blanc"
STOREL -3
JUMP lbl18
lbl17: NOP
PUSHN 1
PUSHS "Noir"
STOREL 1
PUSHS "Gris"
STOREL 0
PUSHL -1
LOAD 1
PUSHI 1
EQUAL
JZ lbl19
PUSHL 1
STOREL 0
JUMP lbl20
lbl19: NOP
PUSHN 0
POPN 0
lbl20: NOP
PUSHL 0
STOREL -3
POPN 1
lbl18: NOP
POPN 1
RETURN
_CTOR_CouleurFactory_: NOP
PUSHN 0
POPN 0
RETURN
CouleurFactory_4_gris: NOP
PUSHG 10
STOREL -1
RETURN
CouleurFactory_4_noir: NOP
PUSHG 9
STOREL -1
RETURN
CouleurFactory_5_blanc: NOP
PUSHG 8
STOREL -1
RETURN
CouleurFactory_4_init: NOP
PUSHN 0
ALLOC 2
DUPN 1
PUSHG 1
STORE 0
PUSHI 0
PUSHA _CTOR_Couleur_
CALL
POPN 1
STOREG 8
ALLOC 2
DUPN 1
PUSHG 1
STORE 0
PUSHI 1
PUSHA _CTOR_Couleur_
CALL
POPN 1
STOREG 9
ALLOC 2
DUPN 1
PUSHG 1
STORE 0
PUSHI 2
PUSHA _CTOR_Couleur_
CALL
POPN 1
STOREG 10
POPN 0
RETURN
_CTOR_PointColore_: NOP
PUSHL -4
PUSHL -3
PUSHL -2
PUSHS "P-"
PUSHI 0
PUSHA Point_7_howMany
CALL
POPN 0
STR
CONCAT
PUSHA _CTOR_Point_
CALL
POPN 4
PUSHN 0
PUSHL -4
PUSHL -1
STORE 7
POPN 0
RETURN
PointColore_5_print: NOP
PUSHN 0
PUSHL -2
JZ lbl21
PUSHS "Inside PointColore::print"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
JUMP lbl22
lbl21: NOP
PUSHN 0
POPN 0
lbl22: NOP
PUSHI 0
PUSHL -2
PUSHL -1
PUSHA Point_5_print
CALL
POPN 2
POPN 1
PUSHI 0
PUSHI 1
PUSHI 0
PUSHL -1
DUPN 1
LOAD 0
LOAD 11
CALL
POPN 1
DUPN 1
LOAD 0
LOAD 1
CALL
POPN 2
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
POPN 0
RETURN
PointColore_7_estGris: NOP
PUSHI 0
PUSHL -1
LOAD 7
DUPN 1
LOAD 0
LOAD 0
CALL
POPN 1
STOREL -2
RETURN
PointColore_5_clone: NOP
ALLOC 8
DUPN 1
PUSHG 3
STORE 0
PUSHL -1
LOAD 4
PUSHL -1
LOAD 5
PUSHL -1
LOAD 7
PUSHA _CTOR_PointColore_
CALL
POPN 3
STOREL -2
RETURN
PointColore_6_colore: NOP
PUSHI 0
PUSHL -1
LOAD 7
DUPN 1
LOAD 0
LOAD 0
CALL
POPN 1
PUSHI 0
EQUAL
NOT
STOREL -2
RETURN
PointColore_7_couleur: NOP
PUSHL -1
LOAD 7
STOREL -2
RETURN
_CTOR_PointNoir_: NOP
PUSHL -3
PUSHL -2
PUSHL -1
PUSHI 0
PUSHA CouleurFactory_4_noir
CALL
POPN 0
PUSHA _CTOR_PointColore_
CALL
POPN 4
PUSHN 0
POPN 0
RETURN
PointNoir_7_couleur: NOP
PUSHI 0
PUSHA CouleurFactory_4_noir
CALL
POPN 0
STOREL -2
RETURN
PointNoir_6_colore: NOP
PUSHI 1
STOREL -2
RETURN
PointNoir_7_estGris: NOP
PUSHI 0
STOREL -2
RETURN
_CTOR_DefaultPoint_: NOP
PUSHL -1
PUSHI 0
PUSHI 0
PUSHI 0
PUSHA CouleurFactory_5_blanc
CALL
POPN 0
PUSHA _CTOR_PointColore_
CALL
POPN 4
PUSHN 0
POPN 0
RETURN
DefaultPoint_7_couleur: NOP
PUSHI 0
PUSHA CouleurFactory_5_blanc
CALL
POPN 0
STOREL -2
RETURN
DefaultPoint_7_estGris: NOP
PUSHI 0
STOREL -2
RETURN
_CTOR_Test_: NOP
PUSHN 0
POPN 0
RETURN
Test_5_test2: NOP
PUSHN 0
PUSHI 0
PUSHI 1
PUSHI 0
PUSHL -1
DUPN 1
LOAD 0
LOAD 11
CALL
POPN 1
DUPN 1
LOAD 0
LOAD 1
CALL
POPN 2
DUPN 1
WRITES
POPN 1
POPN 0
RETURN
Test_4_test: NOP
PUSHN 4
PUSHI 1
STOREL 3
PUSHI 0
PUSHL 3
PUSHL -3
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHL 3
PUSHL -2
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHS "Appel 1: "
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHL -2
DUPN 1
LOAD 0
LOAD 10
CALL
POPN 1
PUSHI 0
EQUAL
NOT
JZ lbl23
PUSHS "colore"
STOREL 0
JUMP lbl24
lbl23: NOP
PUSHS "gris"
STOREL 0
lbl24: NOP
PUSHS "Appel 2: "
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHL -1
DUPN 1
LOAD 0
LOAD 10
CALL
POPN 1
PUSHI 0
EQUAL
NOT
JZ lbl25
PUSHS "colore"
STOREL 1
JUMP lbl26
lbl25: NOP
PUSHS "gris"
STOREL 1
lbl26: NOP
PUSHS "Appel 3: "
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHL -1
DUPN 1
LOAD 0
LOAD 10
CALL
POPN 1
PUSHI 0
EQUAL
NOT
JZ lbl27
PUSHS "colore"
STOREL 2
JUMP lbl28
lbl27: NOP
PUSHS "gris"
STOREL 2
lbl28: NOP
PUSHS "Resultats de test: "
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHL 0
DUPN 1
WRITES
POPN 1
PUSHS " "
DUPN 1
WRITES
POPN 1
PUSHL 1
DUPN 1
WRITES
POPN 1
PUSHS " "
DUPN 1
WRITES
POPN 1
PUSHL 2
DUPN 1
WRITES
POPN 1
PUSHS ""
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
POPN 4
RETURN
