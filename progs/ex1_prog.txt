JUMP start
-- ----- VTABLES -----
ALLOC 9
DUPN 1
PUSHA Point_4_egal
STORE 0
DUPN 1
PUSHA Point_9_allClones
STORE 1
DUPN 1
PUSHA Point_5_clone
STORE 2
DUPN 1
PUSHA Point_5_print
STORE 3
DUPN 1
PUSHA Point_4_move
STORE 4
DUPN 1
PUSHA Point_8_isCloned
STORE 5
DUPN 1
PUSHA Point_7_setName
STORE 6
DUPN 1
PUSHA Point_4_gety
STORE 7
DUPN 1
PUSHA Point_4_getx
STORE 8
ALLOC 2
DUPN 1
PUSHA Couleur_7_estGris
STORE 0
DUPN 1
PUSHA Couleur_4_name
STORE 1
ALLOC 12
DUPN 1
PUSHA Point_4_egal
STORE 0
DUPN 1
PUSHA Point_9_allClones
STORE 1
DUPN 1
PUSHA PointColore_5_clone
STORE 2
DUPN 1
PUSHA PointColore_5_print
STORE 3
DUPN 1
PUSHA Point_4_move
STORE 4
DUPN 1
PUSHA Point_8_isCloned
STORE 5
DUPN 1
PUSHA Point_7_setName
STORE 6
DUPN 1
PUSHA Point_4_gety
STORE 7
DUPN 1
PUSHA Point_4_getx
STORE 8
DUPN 1
PUSHA PointColore_7_estGris
STORE 9
DUPN 1
PUSHA PointColore_6_colore
STORE 10
DUPN 1
PUSHA PointColore_7_couleur
STORE 11
ALLOC 12
DUPN 1
PUSHA Point_4_egal
STORE 0
DUPN 1
PUSHA Point_9_allClones
STORE 1
DUPN 1
PUSHA PointColore_5_clone
STORE 2
DUPN 1
PUSHA PointColore_5_print
STORE 3
DUPN 1
PUSHA Point_4_move
STORE 4
DUPN 1
PUSHA Point_8_isCloned
STORE 5
DUPN 1
PUSHA Point_7_setName
STORE 6
DUPN 1
PUSHA Point_4_gety
STORE 7
DUPN 1
PUSHA Point_4_getx
STORE 8
DUPN 1
PUSHA PointNoir_7_estGris
STORE 9
DUPN 1
PUSHA PointNoir_6_colore
STORE 10
DUPN 1
PUSHA PointNoir_7_couleur
STORE 11
ALLOC 12
DUPN 1
PUSHA Point_4_egal
STORE 0
DUPN 1
PUSHA Point_9_allClones
STORE 1
DUPN 1
PUSHA PointColore_5_clone
STORE 2
DUPN 1
PUSHA PointColore_5_print
STORE 3
DUPN 1
PUSHA Point_4_move
STORE 4
DUPN 1
PUSHA Point_8_isCloned
STORE 5
DUPN 1
PUSHA Point_7_setName
STORE 6
DUPN 1
PUSHA Point_4_gety
STORE 7
DUPN 1
PUSHA Point_4_getx
STORE 8
DUPN 1
PUSHA DefaultPoint_7_estGris
STORE 9
DUPN 1
PUSHA PointColore_6_colore
STORE 10
DUPN 1
PUSHA DefaultPoint_7_couleur
STORE 11
-- ----- STATIC ATTRIBS -----
PUSHN 4
-- ----- MAIN INSTRUCTION -----
start: NOP
START
PUSHN 11
PUSHS "Debut du programme"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHA Point_4_init
CALL
POPN 1
PUSHA CouleurFactory_4_init
CALL
POPN 1
PUSHL 5
PUSHI 1
STOREL 5
PUSHL 6
PUSHI 0
STOREL 6
PUSHL 0
PUSHA _CTOR_Point_
CALL
STOREL 0
PUSHL 1
PUSHA _CTOR_Point_
CALL
STOREL 1
PUSHL 2
PUSHA _CTOR_Point_
CALL
STOREL 2
PUSHL 7
PUSHI 12
STOREL 7
PUSHL 8
PUSHA _CTOR_PointColore_
CALL
STOREL 8
PUSHL 9
PUSHA _CTOR_PointNoir_
CALL
STOREL 9
PUSHL 10
PUSHA _CTOR_DefaultPoint_
CALL
STOREL 10
PUSHI 0
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHI 0
PUSHL 1
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 8
CALL
POPN 1
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 7
CALL
POPN 1
PUSHI 0
PUSHL 1
DUPN 1
LOAD 0
LOAD 4
CALL
POPN 4
POPN 1
PUSHI 0
PUSHI 0
PUSHL 1
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHI 0
PUSHL 8
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHS "origine"
PUSHL 8
DUPN 1
LOAD 0
LOAD 6
CALL
POPN 2
POPN 1
PUSHI 0
PUSHL 5
PUSHL 8
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 8
CALL
POPN 1
PUSHI 2
PUSHI 5
MUL
SUB
PUSHI 3
SUB
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 7
CALL
POPN 1
PUSHI 0
PUSHL 1
DUPN 1
LOAD 0
LOAD 4
CALL
POPN 4
POPN 1
PUSHI 0
PUSHL 5
PUSHL 1
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHS "On va essayer le clonage:"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHL 3
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 2
CALL
POPN 1
STOREL 3
PUSHI 0
PUSHL 6
PUSHL 3
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHS "p1 isCloned: "
DUPN 1
WRITES
POPN 1
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 5
CALL
POPN 1
JZ lbl1
PUSHS "OK"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
JUMP lbl2
lbl1: NOP
PUSHS "KO"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
lbl2: NOP
PUSHL 4
PUSHI 0
PUSHL 3
DUPN 1
LOAD 0
LOAD 2
CALL
POPN 1
STOREL 4
PUSHI 0
PUSHL 6
PUSHI 0
PUSHI 54
PUSHI 36
PUSHI 0
PUSHL 4
DUPN 1
LOAD 0
LOAD 4
CALL
POPN 4
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHS "Impression de tous les clones de p1:"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 1
CALL
POPN 1
POPN 1
PUSHS "Fin de l'impression de tous les clones"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHS "Valeur du compteur de nombre de points: "
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHA Point_7_howMany
CALL
STR
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHL 0
PUSHI 0
PUSHI 2
PUSHI 0
PUSHI 3
SUB
PUSHI 0
PUSHI 0
PUSHL 0
DUPN 1
LOAD 0
LOAD 2
CALL
POPN 1
DUPN 1
LOAD 0
LOAD 4
CALL
POPN 4
STOREL 0
PUSHI 0
PUSHL 5
PUSHL 0
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHI 0
PUSHL 5
PUSHI 0
PUSHL 8
DUPN 1
LOAD 0
LOAD 2
CALL
POPN 1
DUPN 1
LOAD 0
LOAD 3
CALL
POPN 2
POPN 1
PUSHS "test(Point, PointColore, PointNoir)"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHL 0
PUSHL 8
PUSHL 9
PUSHA Test_4_test
CALL
POPN 1
PUSHS "test(PointNoir, PointNoir, PointNoir)"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHL 9
PUSHL 9
PUSHL 9
PUSHA Test_4_test
CALL
POPN 1
PUSHL 0
PUSHL 9
STOREL 0
PUSHL 8
PUSHA Test_5_test2
CALL
POPN 1
PUSHL 9
PUSHA Test_5_test2
CALL
POPN 1
PUSHL 8
PUSHL 9
STOREL 8
PUSHS "test(PointNoir, PointNoir, PointNoir)"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
PUSHL 0
PUSHL 8
PUSHL 9
PUSHA Test_4_test
CALL
POPN 1
PUSHL 8
PUSHA Test_5_test2
CALL
POPN 1
PUSHL 9
PUSHA Test_5_test2
CALL
POPN 1
PUSHS "\nDone"
DUPN 1
WRITES
PUSHS "\n"
WRITES
POPN 1
STOP
-- ----- FUNCTIONS -----
_CTOR_Point_: NOP
ALLOC 7
PUSHI 0
STORE 0
PUSHN 0
PUSHL -4
LOAD 4
PUSHL -3
STORE 3
PUSHL -4
LOAD 5
PUSHL -2
STORE 4
PUSHL -4
LOAD 6
PUSHL -1
STORE 5
PUSHL -4
LOAD 2
PUSHA Point_4_incr
CALL
STORE 1
PUSHL -4
LOAD 3
PUSHI 0
STORE 2
_CTOR_Couleur_: NOP
ALLOC 2
PUSHI 1
STORE 0
PUSHN 0
PUSHL -2
LOAD 1
PUSHL -1
STORE 0
PUSHL -2
LOAD 1
PUSHI 0
INF
JZ lbl3
PUSHL -2
LOAD 1
PUSHI 0
STORE 0
JUMP lbl4
lbl3: NOP
PUSHL -2
LOAD 1
PUSHI 2
SUP
JZ lbl5
PUSHL -2
LOAD 1
PUSHI 0
STORE 0
JUMP lbl6
lbl5: NOP
PUSHN 0
lbl6: NOP
lbl4: NOP
_CTOR_CouleurFactory_: NOP
ALLOC 1
PUSHI 2
STORE 0
PUSHN 0
_CTOR_PointColore_: NOP
ALLOC 8
PUSHI 3
STORE 0
PUSHL -3
PUSHL -2
PUSHS "P-"
PUSHA Point_7_howMany
CALL
STR
CONCAT
PUSHL -4
PUSHA _CTOR_Point_
CALL
POPN 4
PUSHN 0
PUSHL -4
LOAD 7
PUSHL -1
STORE 6
_CTOR_PointNoir_: NOP
ALLOC 8
PUSHI 4
STORE 0
PUSHL -2
PUSHL -1
PUSHA CouleurFactory_4_noir
CALL
PUSHL -4
PUSHA _CTOR_PointColore_
CALL
POPN 4
PUSHN 0
_CTOR_DefaultPoint_: NOP
ALLOC 8
PUSHI 5
STORE 0
PUSHI 0
PUSHI 0
PUSHA CouleurFactory_5_blanc
CALL
PUSHL -4
PUSHA _CTOR_PointColore_
CALL
POPN 4
PUSHN 0
_CTOR_Test_: NOP
ALLOC 1
PUSHI 6
STORE 0
PUSHN 0
